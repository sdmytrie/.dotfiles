"use strict";
const logger_1 = require("./lib/logger");
const nx_imports_plugin_1 = require("./lib/nx-imports-plugin");
const init = ({ typescript }) => {
    let logger;
    const nxImportsPlugin = new nx_imports_plugin_1.NxImportsPlugin(typescript);
    return {
        create(info) {
            logger = logger_1.Logger.create(info);
            logger.log('create');
            nxImportsPlugin.logger = logger;
            if (Object.keys(info.config).length > 0) {
                nxImportsPlugin.setConfig(info.config);
            }
            nxImportsPlugin.addProject(info.project);
            return nxImportsPlugin.decorate(info.languageService);
        },
        onConfigurationChanged(config) {
            logger?.log('onConfigurationChanged called, ' + JSON.stringify(config));
            nxImportsPlugin.setConfig(config);
        },
    };
};
module.exports = init;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wYWNrYWdlcy90eXBlc2NyaXB0LW54LWltcG9ydHMtcGx1Z2luL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EseUNBQXNDO0FBQ3RDLCtEQUEwRDtBQUUxRCxNQUFNLElBQUksR0FBa0MsQ0FBQyxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUU7SUFDN0QsSUFBSSxNQUEwQixDQUFDO0lBQy9CLE1BQU0sZUFBZSxHQUFHLElBQUksbUNBQWUsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUV4RCxPQUFPO1FBQ0wsTUFBTSxDQUFDLElBQWdDO1lBQ3JDLE1BQU0sR0FBRyxlQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdCLE1BQU0sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDckIsZUFBZSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFFaEMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUN2QyxlQUFlLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQzthQUN4QztZQUNELGVBQWUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRXpDLE9BQU8sZUFBZSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUNELHNCQUFzQixDQUFDLE1BR3RCO1lBQ0MsTUFBTSxFQUFFLEdBQUcsQ0FBQyxpQ0FBaUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDeEUsZUFBZSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwQyxDQUFDO0tBQ0YsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGlCQUFTLElBQUksQ0FBQyJ9